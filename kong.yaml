_format_version: "1.1"
consumers:
- custom_id: Nook
  username: Nook
- plugins:
  - config:
      day: null
      fault_tolerant: true
      header_name: null
      hide_client_headers: false
      hour: null
      limit_by: consumer
      minute: null
      month: null
      path: null
      policy: local
      redis_database: 0
      redis_host: null
      redis_password: null
      redis_port: 6379
      redis_server_name: null
      redis_ssl: false
      redis_ssl_verify: false
      redis_timeout: 2000
      redis_username: null
      second: 10
      year: null
    enabled: false
    name: rate-limiting
    protocols:
    - grpc
    - grpcs
    - http
    - https
  username: Thammatee
- custom_id: vTJLM-4Plq7Y5KAppLJt4HFQTyGOgsiowH1RfPdnVOw
  username: tanawat
plugins:
- config:
    custom_fields_by_lua: {}
    path: /dev/stdout
    reopen: false
  enabled: true
  name: file-log
  protocols:
  - grpc
  - grpcs
  - http
  - https
services:
- connect_timeout: 60000
  enabled: true
  host: graph.microsoft.com
  name: B2CUserService
  path: /v1.0/users
  port: 443
  protocol: https
  read_timeout: 60000
  retries: 5
  write_timeout: 60000
- connect_timeout: 60000
  enabled: true
  host: HTTPbin
  name: HTTPbinService
  path: /anything
  port: 80
  protocol: http
  read_timeout: 60000
  retries: 5
  write_timeout: 60000
- connect_timeout: 60000
  enabled: true
  host: httpbin.org
  name: httpbin
  path: /anything
  port: 80
  protocol: http
  read_timeout: 60000
  retries: 5
  routes:
  - https_redirect_status_code: 426
    name: Test
    path_handling: v0
    paths:
    - /testip
    plugins:
    - config:
        allow:
        - 10.200.7.110/32
        deny: null
        message: null
        status: null
      enabled: true
      name: ip-restriction
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - https_redirect_status_code: 426
    name: httpbin-route
    path_handling: v0
    paths:
    - /anything_legacy
    plugins:
    - config:
        anonymous: null
        audience: null
        audience_claim:
        - aud
        audience_required: null
        auth_methods:
        - authorization_code
        - session
        authenticated_groups_claim: null
        authorization_cookie_domain: null
        authorization_cookie_httponly: true
        authorization_cookie_lifetime: 600
        authorization_cookie_name: authorization
        authorization_cookie_path: /
        authorization_cookie_samesite: "off"
        authorization_cookie_secure: null
        authorization_endpoint: null
        authorization_query_args_client: null
        authorization_query_args_names: null
        authorization_query_args_values: null
        bearer_token_cookie_name: null
        bearer_token_param_type:
        - header
        - query
        - body
        by_username_ignore_case: false
        cache_introspection: true
        cache_token_exchange: true
        cache_tokens: false
        cache_tokens_salt: gBgj90QmUzbpDNu7ZIShVTP8dPHYPwTA
        cache_ttl: 3600
        cache_ttl_max: null
        cache_ttl_min: null
        cache_ttl_neg: null
        cache_ttl_resurrect: null
        cache_user_info: true
        client_alg: null
        client_arg: client_id
        client_auth: null
        client_credentials_param_type:
        - header
        - query
        - body
        client_id:
        - a886c2d0-88b5-4fb5-98f1-49ba367e67ea
        client_jwk: null
        client_secret:
        - b_B8Q~sPO2ZCvegDoMGR_ERYwWRI68DWKQ.redln
        consumer_by:
        - username
        - custom_id
        consumer_claim: null
        consumer_optional: false
        credential_claim:
        - sub
        disable_session: null
        discovery_headers_names: null
        discovery_headers_values: null
        display_errors: false
        domains: null
        downstream_access_token_header: null
        downstream_access_token_jwk_header: null
        downstream_headers_claims: null
        downstream_headers_names: null
        downstream_id_token_header: null
        downstream_id_token_jwk_header: null
        downstream_introspection_header: null
        downstream_introspection_jwt_header: null
        downstream_refresh_token_header: null
        downstream_session_id_header: null
        downstream_user_info_header: null
        downstream_user_info_jwt_header: null
        enable_hs_signatures: false
        end_session_endpoint: null
        extra_jwks_uris: null
        forbidden_destroy_session: true
        forbidden_error_message: Forbidden
        forbidden_redirect_uri: null
        groups_claim:
        - groups
        groups_required: null
        hide_credentials: false
        http_proxy: null
        http_proxy_authorization: null
        http_version: 1.1
        https_proxy: null
        https_proxy_authorization: null
        id_token_param_name: null
        id_token_param_type:
        - header
        - query
        - body
        ignore_signature: []
        introspect_jwt_tokens: false
        introspection_accept: application/json
        introspection_check_active: true
        introspection_endpoint: null
        introspection_endpoint_auth_method: null
        introspection_headers_client: null
        introspection_headers_names: null
        introspection_headers_values: null
        introspection_hint: access_token
        introspection_post_args_client: null
        introspection_post_args_names: null
        introspection_post_args_values: null
        issuer: https://login.microsoftonline.com/5cd3c749-e3ff-420c-a8bc-196250d99f8a/v2.0/.well-known/openid-configuration
        issuers_allowed: null
        jwt_session_claim: sid
        jwt_session_cookie: null
        keepalive: true
        leeway: 0
        login_action: redirect
        login_methods:
        - authorization_code
        login_redirect_mode: fragment
        login_redirect_uri: []
        login_tokens: []
        logout_methods:
        - POST
        - DELETE
        logout_post_arg: null
        logout_query_arg: null
        logout_redirect_uri: null
        logout_revoke: false
        logout_revoke_access_token: true
        logout_revoke_refresh_token: true
        logout_uri_suffix: null
        max_age: null
        no_proxy: null
        password_param_type:
        - header
        - query
        - body
        preserve_query_args: true
        redirect_uri:
        - https://18.140.249.27:8443/anything_legacy
        rediscovery_lifetime: 30
        refresh_token_param_name: null
        refresh_token_param_type:
        - header
        - query
        - body
        refresh_tokens: true
        resolve_distributed_claims: false
        response_mode: form_post
        response_type:
        - code
        reverify: false
        revocation_endpoint: null
        revocation_endpoint_auth_method: null
        roles_claim:
        - roles
        roles_required: null
        run_on_preflight: true
        scopes:
        - openid
        - a886c2d0-88b5-4fb5-98f1-49ba367e67ea/.default
        scopes_claim:
        - scope
        scopes_required: null
        search_user_info: false
        session_compressor: none
        session_cookie_domain: null
        session_cookie_httponly: true
        session_cookie_idletime: null
        session_cookie_lifetime: 3600
        session_cookie_maxsize: 4000
        session_cookie_name: session
        session_cookie_path: /
        session_cookie_renew: 600
        session_cookie_samesite: Lax
        session_cookie_secure: null
        session_memcache_host: 127.0.0.1
        session_memcache_port: 11211
        session_memcache_prefix: sessions
        session_memcache_socket: null
        session_redis_cluster_maxredirections: null
        session_redis_cluster_nodes: null
        session_redis_connect_timeout: null
        session_redis_host: 127.0.0.1
        session_redis_password: null
        session_redis_port: 6379
        session_redis_prefix: sessions
        session_redis_read_timeout: null
        session_redis_send_timeout: null
        session_redis_server_name: null
        session_redis_socket: null
        session_redis_ssl: false
        session_redis_ssl_verify: false
        session_redis_username: null
        session_secret: null
        session_storage: cookie
        session_strategy: default
        ssl_verify: false
        timeout: 10000
        token_endpoint: null
        token_endpoint_auth_method: null
        token_exchange_endpoint: null
        token_headers_client: null
        token_headers_grants: null
        token_headers_names: null
        token_headers_prefix: null
        token_headers_replay: null
        token_headers_values: null
        token_post_args_client: null
        token_post_args_names: null
        token_post_args_values: null
        unauthorized_error_message: Unauthorized
        unauthorized_redirect_uri: null
        unexpected_redirect_uri: null
        upstream_access_token_header: authorization:bearer
        upstream_access_token_jwk_header: null
        upstream_headers_claims: null
        upstream_headers_names: null
        upstream_id_token_header: null
        upstream_id_token_jwk_header: null
        upstream_introspection_header: null
        upstream_introspection_jwt_header: null
        upstream_refresh_token_header: null
        upstream_session_id_header: null
        upstream_user_info_header: null
        upstream_user_info_jwt_header: null
        userinfo_accept: application/json
        userinfo_endpoint: null
        userinfo_headers_client: null
        userinfo_headers_names: null
        userinfo_headers_values: null
        userinfo_query_args_client: null
        userinfo_query_args_names: null
        userinfo_query_args_values: null
        verify_claims: true
        verify_nonce: true
        verify_parameters: false
        verify_signature: true
      enabled: true
      name: openid-connect
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - https_redirect_status_code: 426
    name: httpbin-route-authcode
    path_handling: v0
    paths:
    - /anything/code_legacy
    plugins:
    - config:
        anonymous: null
        audience: null
        audience_claim:
        - aud
        audience_required: null
        auth_methods:
        - authorization_code
        - session
        authenticated_groups_claim: null
        authorization_cookie_domain: null
        authorization_cookie_httponly: true
        authorization_cookie_lifetime: 600
        authorization_cookie_name: authorization
        authorization_cookie_path: /
        authorization_cookie_samesite: "off"
        authorization_cookie_secure: null
        authorization_endpoint: null
        authorization_query_args_client: null
        authorization_query_args_names: null
        authorization_query_args_values: null
        bearer_token_cookie_name: null
        bearer_token_param_type:
        - header
        - query
        - body
        by_username_ignore_case: false
        cache_introspection: true
        cache_token_exchange: true
        cache_tokens: false
        cache_tokens_salt: D47ZagMIZ8y7OEfCHLK4qs4KwQZZq2xa
        cache_ttl: 3600
        cache_ttl_max: null
        cache_ttl_min: null
        cache_ttl_neg: null
        cache_ttl_resurrect: null
        cache_user_info: true
        client_alg: null
        client_arg: client_id
        client_auth: null
        client_credentials_param_type:
        - header
        - query
        - body
        client_id:
        - a886c2d0-88b5-4fb5-98f1-49ba367e67ea
        client_jwk: null
        client_secret:
        - b_B8Q~sPO2ZCvegDoMGR_ERYwWRI68DWKQ.redln
        consumer_by:
        - username
        - custom_id
        consumer_claim: null
        consumer_optional: false
        credential_claim:
        - sub
        disable_session: null
        discovery_headers_names: null
        discovery_headers_values: null
        display_errors: false
        domains: null
        downstream_access_token_header: null
        downstream_access_token_jwk_header: null
        downstream_headers_claims: null
        downstream_headers_names: null
        downstream_id_token_header: null
        downstream_id_token_jwk_header: null
        downstream_introspection_header: null
        downstream_introspection_jwt_header: null
        downstream_refresh_token_header: null
        downstream_session_id_header: null
        downstream_user_info_header: null
        downstream_user_info_jwt_header: null
        enable_hs_signatures: false
        end_session_endpoint: null
        extra_jwks_uris: null
        forbidden_destroy_session: true
        forbidden_error_message: Forbidden
        forbidden_redirect_uri: null
        groups_claim:
        - groups
        groups_required: null
        hide_credentials: false
        http_proxy: null
        http_proxy_authorization: null
        http_version: 1.1
        https_proxy: null
        https_proxy_authorization: null
        id_token_param_name: null
        id_token_param_type:
        - header
        - query
        - body
        ignore_signature: []
        introspect_jwt_tokens: false
        introspection_accept: application/json
        introspection_check_active: true
        introspection_endpoint: null
        introspection_endpoint_auth_method: null
        introspection_headers_client: null
        introspection_headers_names: null
        introspection_headers_values: null
        introspection_hint: access_token
        introspection_post_args_client: null
        introspection_post_args_names: null
        introspection_post_args_values: null
        issuer: https://login.microsoftonline.com/5cd3c749-e3ff-420c-a8bc-196250d99f8a/v2.0/.well-known/openid-configuration
        issuers_allowed: null
        jwt_session_claim: sid
        jwt_session_cookie: null
        keepalive: true
        leeway: 0
        login_action: redirect
        login_methods:
        - authorization_code
        login_redirect_mode: fragment
        login_redirect_uri: null
        login_tokens: []
        logout_methods:
        - POST
        - DELETE
        logout_post_arg: null
        logout_query_arg: null
        logout_redirect_uri: null
        logout_revoke: false
        logout_revoke_access_token: true
        logout_revoke_refresh_token: true
        logout_uri_suffix: null
        max_age: null
        no_proxy: null
        password_param_type:
        - header
        - query
        - body
        preserve_query_args: false
        redirect_uri:
        - https://httpbin.org/anything
        rediscovery_lifetime: 30
        refresh_token_param_name: null
        refresh_token_param_type:
        - header
        - query
        - body
        refresh_tokens: true
        resolve_distributed_claims: false
        response_mode: query
        response_type:
        - code
        reverify: false
        revocation_endpoint: null
        revocation_endpoint_auth_method: null
        roles_claim:
        - roles
        roles_required: null
        run_on_preflight: true
        scopes:
        - openid
        scopes_claim:
        - scope
        scopes_required: null
        search_user_info: false
        session_compressor: none
        session_cookie_domain: null
        session_cookie_httponly: true
        session_cookie_idletime: null
        session_cookie_lifetime: 3600
        session_cookie_maxsize: 4000
        session_cookie_name: session
        session_cookie_path: /
        session_cookie_renew: 600
        session_cookie_samesite: Lax
        session_cookie_secure: null
        session_memcache_host: 127.0.0.1
        session_memcache_port: 11211
        session_memcache_prefix: sessions
        session_memcache_socket: null
        session_redis_cluster_maxredirections: null
        session_redis_cluster_nodes: null
        session_redis_connect_timeout: null
        session_redis_host: 127.0.0.1
        session_redis_password: null
        session_redis_port: 6379
        session_redis_prefix: sessions
        session_redis_read_timeout: null
        session_redis_send_timeout: null
        session_redis_server_name: null
        session_redis_socket: null
        session_redis_ssl: false
        session_redis_ssl_verify: false
        session_redis_username: null
        session_secret: null
        session_storage: cookie
        session_strategy: default
        ssl_verify: false
        timeout: 10000
        token_endpoint: null
        token_endpoint_auth_method: null
        token_exchange_endpoint: null
        token_headers_client: null
        token_headers_grants: null
        token_headers_names: null
        token_headers_prefix: null
        token_headers_replay: null
        token_headers_values: null
        token_post_args_client: null
        token_post_args_names: null
        token_post_args_values: null
        unauthorized_error_message: Unauthorized
        unauthorized_redirect_uri: null
        unexpected_redirect_uri: null
        upstream_access_token_header: authorization:bearer
        upstream_access_token_jwk_header: null
        upstream_headers_claims: null
        upstream_headers_names: null
        upstream_id_token_header: null
        upstream_id_token_jwk_header: null
        upstream_introspection_header: null
        upstream_introspection_jwt_header: null
        upstream_refresh_token_header: null
        upstream_session_id_header: null
        upstream_user_info_header: null
        upstream_user_info_jwt_header: null
        userinfo_accept: application/json
        userinfo_endpoint: null
        userinfo_headers_client: null
        userinfo_headers_names: null
        userinfo_headers_values: null
        userinfo_query_args_client: null
        userinfo_query_args_names: null
        userinfo_query_args_values: null
        verify_claims: true
        verify_nonce: true
        verify_parameters: false
        verify_signature: true
      enabled: true
      name: openid-connect
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - https_redirect_status_code: 426
    name: httpbin-route-jwt
    path_handling: v0
    paths:
    - /anything/jwt
    plugins:
    - config:
        anonymous: null
        claims_to_verify:
        - exp
        cookie_names: []
        header_names:
        - authorization
        key_claim_name: kid
        maximum_expiration: 0
        run_on_preflight: true
        secret_is_base64: false
        uri_param_names:
        - jwt
      enabled: false
      name: jwt
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - hosts:
    - example.com
    https_redirect_status_code: 426
    name: jwt-signer-idp-aad
    path_handling: v0
    paths:
    - /jwt-signer-idp-aad
    plugins:
    - config:
        access_token_consumer_by:
        - username
        - custom_id
        access_token_consumer_claim: null
        access_token_introspection_authorization: null
        access_token_introspection_body_args: null
        access_token_introspection_consumer_by:
        - username
        - custom_id
        access_token_introspection_consumer_claim: null
        access_token_introspection_endpoint: null
        access_token_introspection_hint: access_token
        access_token_introspection_jwt_claim: null
        access_token_introspection_leeway: 0
        access_token_introspection_scopes_claim:
        - scope
        access_token_introspection_scopes_required: null
        access_token_introspection_timeout: null
        access_token_issuer: kong
        access_token_jwks_uri: https://login.microsoftonline.com/434874dc-c515-4a09-8e30-7bdbc40f63ff/discovery/v2.0/keys
        access_token_keyset: kong
        access_token_leeway: 0
        access_token_optional: false
        access_token_request_header: Authorization
        access_token_scopes_claim:
        - scope
        access_token_scopes_required: null
        access_token_signing_algorithm: RS256
        access_token_upstream_header: Authorization:Bearer
        access_token_upstream_leeway: 0
        cache_access_token_introspection: true
        cache_channel_token_introspection: true
        channel_token_consumer_by:
        - username
        - custom_id
        channel_token_consumer_claim: null
        channel_token_introspection_authorization: null
        channel_token_introspection_body_args: null
        channel_token_introspection_consumer_by:
        - username
        - custom_id
        channel_token_introspection_consumer_claim: null
        channel_token_introspection_endpoint: null
        channel_token_introspection_hint: null
        channel_token_introspection_jwt_claim: null
        channel_token_introspection_leeway: 0
        channel_token_introspection_scopes_claim:
        - scope
        channel_token_introspection_scopes_required: null
        channel_token_introspection_timeout: null
        channel_token_issuer: kong
        channel_token_jwks_uri: null
        channel_token_keyset: kong
        channel_token_leeway: 0
        channel_token_optional: true
        channel_token_request_header: null
        channel_token_scopes_claim:
        - scope
        channel_token_scopes_required: null
        channel_token_signing_algorithm: RS256
        channel_token_upstream_header: null
        channel_token_upstream_leeway: 0
        enable_access_token_introspection: true
        enable_channel_token_introspection: true
        enable_hs_signatures: false
        enable_instrumentation: false
        realm: null
        trust_access_token_introspection: true
        trust_channel_token_introspection: true
        verify_access_token_expiry: true
        verify_access_token_introspection_expiry: true
        verify_access_token_introspection_scopes: true
        verify_access_token_scopes: true
        verify_access_token_signature: true
        verify_channel_token_expiry: true
        verify_channel_token_introspection_expiry: true
        verify_channel_token_introspection_scopes: true
        verify_channel_token_scopes: true
        verify_channel_token_signature: true
      enabled: true
      name: jwt-signer
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - hosts:
    - example.com
    https_redirect_status_code: 426
    name: jwt-signer-idp-ad
    path_handling: v0
    paths:
    - /jwt-signer-idp-ad
    plugins:
    - config:
        access_token_consumer_by:
        - username
        - custom_id
        access_token_consumer_claim: null
        access_token_introspection_authorization: null
        access_token_introspection_body_args: null
        access_token_introspection_consumer_by:
        - username
        - custom_id
        access_token_introspection_consumer_claim: null
        access_token_introspection_endpoint: null
        access_token_introspection_hint: access_token
        access_token_introspection_jwt_claim: null
        access_token_introspection_leeway: 0
        access_token_introspection_scopes_claim:
        - scope
        access_token_introspection_scopes_required: null
        access_token_introspection_timeout: null
        access_token_issuer: kong
        access_token_jwks_uri: https://login.microsoftonline.com/5cd3c749-e3ff-420c-a8bc-196250d99f8a/discovery/v2.0/keys
        access_token_keyset: kong
        access_token_leeway: 0
        access_token_optional: false
        access_token_request_header: Authorization
        access_token_scopes_claim:
        - scp
        access_token_scopes_required:
        - User.Read
        access_token_signing_algorithm: RS256
        access_token_upstream_header: Authorization:Bearer
        access_token_upstream_leeway: 0
        cache_access_token_introspection: true
        cache_channel_token_introspection: true
        channel_token_consumer_by:
        - username
        - custom_id
        channel_token_consumer_claim: null
        channel_token_introspection_authorization: null
        channel_token_introspection_body_args: null
        channel_token_introspection_consumer_by:
        - username
        - custom_id
        channel_token_introspection_consumer_claim: null
        channel_token_introspection_endpoint: null
        channel_token_introspection_hint: null
        channel_token_introspection_jwt_claim: null
        channel_token_introspection_leeway: 0
        channel_token_introspection_scopes_claim:
        - scope
        channel_token_introspection_scopes_required: null
        channel_token_introspection_timeout: null
        channel_token_issuer: kong
        channel_token_jwks_uri: null
        channel_token_keyset: kong
        channel_token_leeway: 0
        channel_token_optional: true
        channel_token_request_header: null
        channel_token_scopes_claim:
        - scope
        channel_token_scopes_required: null
        channel_token_signing_algorithm: RS256
        channel_token_upstream_header: null
        channel_token_upstream_leeway: 0
        enable_access_token_introspection: true
        enable_channel_token_introspection: true
        enable_hs_signatures: false
        enable_instrumentation: false
        realm: null
        trust_access_token_introspection: true
        trust_channel_token_introspection: true
        verify_access_token_expiry: true
        verify_access_token_introspection_expiry: true
        verify_access_token_introspection_scopes: true
        verify_access_token_scopes: true
        verify_access_token_signature: true
        verify_channel_token_expiry: true
        verify_channel_token_introspection_expiry: true
        verify_channel_token_introspection_scopes: true
        verify_channel_token_scopes: true
        verify_channel_token_signature: true
      enabled: true
      name: jwt-signer
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - hosts:
    - example.com
    https_redirect_status_code: 426
    name: jwt-signer-idp-kc
    path_handling: v0
    paths:
    - /jwt-signer-idp-kc
    plugins:
    - config:
        access_token_consumer_by:
        - username
        - custom_id
        access_token_consumer_claim:
        - preferred_username
        access_token_introspection_authorization: null
        access_token_introspection_body_args: null
        access_token_introspection_consumer_by:
        - username
        - custom_id
        access_token_introspection_consumer_claim: null
        access_token_introspection_endpoint: null
        access_token_introspection_hint: access_token
        access_token_introspection_jwt_claim: null
        access_token_introspection_leeway: 0
        access_token_introspection_scopes_claim:
        - scope
        access_token_introspection_scopes_required: null
        access_token_introspection_timeout: null
        access_token_issuer: kong
        access_token_jwks_uri: https://18.140.115.244:8443/auth/realms/master/protocol/openid-connect/certs
        access_token_keyset: kong
        access_token_leeway: 0
        access_token_optional: false
        access_token_request_header: Authorization
        access_token_scopes_claim:
        - scope
        access_token_scopes_required: null
        access_token_signing_algorithm: RS256
        access_token_upstream_header: Authorization:Bearer
        access_token_upstream_leeway: 0
        cache_access_token_introspection: true
        cache_channel_token_introspection: true
        channel_token_consumer_by:
        - username
        - custom_id
        channel_token_consumer_claim: null
        channel_token_introspection_authorization: null
        channel_token_introspection_body_args: null
        channel_token_introspection_consumer_by:
        - username
        - custom_id
        channel_token_introspection_consumer_claim: null
        channel_token_introspection_endpoint: null
        channel_token_introspection_hint: null
        channel_token_introspection_jwt_claim: null
        channel_token_introspection_leeway: 0
        channel_token_introspection_scopes_claim:
        - scope
        channel_token_introspection_scopes_required: null
        channel_token_introspection_timeout: null
        channel_token_issuer: kong
        channel_token_jwks_uri: null
        channel_token_keyset: kong
        channel_token_leeway: 0
        channel_token_optional: true
        channel_token_request_header: null
        channel_token_scopes_claim:
        - scope
        channel_token_scopes_required: null
        channel_token_signing_algorithm: RS256
        channel_token_upstream_header: null
        channel_token_upstream_leeway: 0
        enable_access_token_introspection: true
        enable_channel_token_introspection: true
        enable_hs_signatures: false
        enable_instrumentation: false
        realm: null
        trust_access_token_introspection: true
        trust_channel_token_introspection: true
        verify_access_token_expiry: true
        verify_access_token_introspection_expiry: true
        verify_access_token_introspection_scopes: true
        verify_access_token_scopes: true
        verify_access_token_signature: true
        verify_channel_token_expiry: true
        verify_channel_token_introspection_expiry: true
        verify_channel_token_introspection_scopes: true
        verify_channel_token_scopes: true
        verify_channel_token_signature: true
      enabled: true
      name: jwt-signer
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - https_redirect_status_code: 426
    name: jwt-signer-oauth2
    path_handling: v0
    paths:
    - /jwt-signer-oauth2
    plugins:
    - config:
        access_token_consumer_by:
        - username
        - custom_id
        access_token_consumer_claim: null
        access_token_introspection_authorization: Basic a29uZy10ZXN0OlpnUGNFbXVGcTJSYzFTUU9LTjE5RUt3cUxUVTQ3UlVq
        access_token_introspection_body_args: null
        access_token_introspection_consumer_by:
        - username
        - custom_id
        access_token_introspection_consumer_claim:
        - username
        access_token_introspection_endpoint: https://13.212.129.64:8443/auth/realms/master/protocol/openid-connect/token/introspect
        access_token_introspection_hint: access_token
        access_token_introspection_jwt_claim: []
        access_token_introspection_leeway: 0
        access_token_introspection_scopes_claim:
        - scope
        access_token_introspection_scopes_required: null
        access_token_introspection_timeout: null
        access_token_issuer: kong
        access_token_jwks_uri: null
        access_token_keyset: kong
        access_token_leeway: 0
        access_token_optional: false
        access_token_request_header: Authorization
        access_token_scopes_claim:
        - scope
        access_token_scopes_required: null
        access_token_signing_algorithm: RS256
        access_token_upstream_header: Authorization:Bearer
        access_token_upstream_leeway: 0
        cache_access_token_introspection: true
        cache_channel_token_introspection: true
        channel_token_consumer_by:
        - username
        - custom_id
        channel_token_consumer_claim: null
        channel_token_introspection_authorization: null
        channel_token_introspection_body_args: null
        channel_token_introspection_consumer_by:
        - username
        - custom_id
        channel_token_introspection_consumer_claim: null
        channel_token_introspection_endpoint: null
        channel_token_introspection_hint: null
        channel_token_introspection_jwt_claim: null
        channel_token_introspection_leeway: 0
        channel_token_introspection_scopes_claim:
        - scope
        channel_token_introspection_scopes_required: null
        channel_token_introspection_timeout: null
        channel_token_issuer: kong
        channel_token_jwks_uri: null
        channel_token_keyset: kong
        channel_token_leeway: 0
        channel_token_optional: true
        channel_token_request_header: null
        channel_token_scopes_claim:
        - scope
        channel_token_scopes_required: null
        channel_token_signing_algorithm: RS256
        channel_token_upstream_header: null
        channel_token_upstream_leeway: 0
        enable_access_token_introspection: true
        enable_channel_token_introspection: true
        enable_hs_signatures: false
        enable_instrumentation: false
        realm: null
        trust_access_token_introspection: true
        trust_channel_token_introspection: true
        verify_access_token_expiry: true
        verify_access_token_introspection_expiry: true
        verify_access_token_introspection_scopes: true
        verify_access_token_scopes: true
        verify_access_token_signature: true
        verify_channel_token_expiry: true
        verify_channel_token_introspection_expiry: true
        verify_channel_token_introspection_scopes: true
        verify_channel_token_scopes: true
        verify_channel_token_signature: true
      enabled: false
      name: jwt-signer
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - https_redirect_status_code: 426
    name: testIpRestriction
    path_handling: v0
    paths:
    - /ip
    plugins:
    - config:
        allow:
        - 10.200.7.110/32
        deny: null
        message: null
        status: null
      enabled: true
      name: ip-restriction
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - https_redirect_status_code: 426
    name: testoauth2
    path_handling: v0
    paths:
    - /testoauth2
    plugins:
    - config:
        anonymous: ""
        authorization_value: Basic a29uZy10ZXN0OlpnUGNFbXVGcTJSYzFTUU9LTjE5RUt3cUxUVTQ3UlVq
        consumer_by: username
        custom_claims_forward: []
        custom_introspection_headers: {}
        hide_credentials: true
        introspect_request: true
        introspection_url: https://keycloak.local.com:8443/auth/realms/master/protocol/openid-connect/token/introspect
        keepalive: 60000
        run_on_preflight: true
        timeout: 10000
        token_type_hint: null
        ttl: 30
      enabled: false
      name: oauth2-introspection
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  write_timeout: 60000
- connect_timeout: 60000
  enabled: true
  host: mockbin.org
  name: httpbin-jwt-signer
  path: /request
  port: 80
  protocol: http
  read_timeout: 60000
  retries: 5
  routes:
  - https_redirect_status_code: 426
    name: httpbin-jwt-signer-route
    path_handling: v0
    paths:
    - /httpbin-jwt-signer
    plugins:
    - config:
        access_token_consumer_by:
        - username
        - custom_id
        access_token_consumer_claim:
        - username
        access_token_introspection_authorization: null
        access_token_introspection_body_args: null
        access_token_introspection_consumer_by:
        - username
        - custom_id
        access_token_introspection_consumer_claim: null
        access_token_introspection_endpoint: null
        access_token_introspection_hint: access_token
        access_token_introspection_jwt_claim: null
        access_token_introspection_leeway: 0
        access_token_introspection_scopes_claim:
        - scope
        access_token_introspection_scopes_required: null
        access_token_introspection_timeout: null
        access_token_issuer: kong
        access_token_jwks_uri: http://13.229.156.111:3000/db
        access_token_keyset: kong
        access_token_leeway: 0
        access_token_optional: false
        access_token_request_header: Authorization
        access_token_scopes_claim:
        - scope
        access_token_scopes_required: null
        access_token_signing_algorithm: RS256
        access_token_upstream_header: Authorization:Bearer
        access_token_upstream_leeway: 0
        cache_access_token_introspection: true
        cache_channel_token_introspection: true
        channel_token_consumer_by:
        - username
        - custom_id
        channel_token_consumer_claim: null
        channel_token_introspection_authorization: null
        channel_token_introspection_body_args: null
        channel_token_introspection_consumer_by:
        - username
        - custom_id
        channel_token_introspection_consumer_claim: null
        channel_token_introspection_endpoint: null
        channel_token_introspection_hint: null
        channel_token_introspection_jwt_claim: null
        channel_token_introspection_leeway: 0
        channel_token_introspection_scopes_claim:
        - scope
        channel_token_introspection_scopes_required: null
        channel_token_introspection_timeout: null
        channel_token_issuer: kong
        channel_token_jwks_uri: null
        channel_token_keyset: kong
        channel_token_leeway: 0
        channel_token_optional: true
        channel_token_request_header: null
        channel_token_scopes_claim:
        - scope
        channel_token_scopes_required: null
        channel_token_signing_algorithm: RS256
        channel_token_upstream_header: null
        channel_token_upstream_leeway: 0
        enable_access_token_introspection: true
        enable_channel_token_introspection: true
        enable_hs_signatures: false
        enable_instrumentation: false
        realm: null
        trust_access_token_introspection: true
        trust_channel_token_introspection: true
        verify_access_token_expiry: true
        verify_access_token_introspection_expiry: true
        verify_access_token_introspection_scopes: true
        verify_access_token_scopes: true
        verify_access_token_signature: true
        verify_channel_token_expiry: true
        verify_channel_token_introspection_expiry: true
        verify_channel_token_introspection_scopes: true
        verify_channel_token_scopes: true
        verify_channel_token_signature: true
      enabled: false
      name: jwt-signer
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - hosts:
    - example.com
    https_redirect_status_code: 426
    name: httpbin-oidc-route
    path_handling: v0
    paths:
    - /oidc
    plugins:
    - config:
        anonymous: null
        audience: null
        audience_claim:
        - aud
        audience_required: null
        auth_methods:
        - authorization_code
        - client_credentials
        - password
        - bearer
        authenticated_groups_claim: null
        authorization_cookie_domain: null
        authorization_cookie_httponly: true
        authorization_cookie_lifetime: 600
        authorization_cookie_name: authorization
        authorization_cookie_path: /
        authorization_cookie_samesite: "off"
        authorization_cookie_secure: null
        authorization_endpoint: null
        authorization_query_args_client: null
        authorization_query_args_names: null
        authorization_query_args_values: null
        bearer_token_cookie_name: null
        bearer_token_param_type:
        - header
        - query
        - body
        by_username_ignore_case: false
        cache_introspection: true
        cache_token_exchange: true
        cache_tokens: true
        cache_tokens_salt: 2VTC610WaglMY406QnwL7eoLBW3Y6vym
        cache_ttl: 3600
        cache_ttl_max: null
        cache_ttl_min: null
        cache_ttl_neg: null
        cache_ttl_resurrect: null
        cache_user_info: true
        client_alg: null
        client_arg: client_id
        client_auth: null
        client_credentials_param_type:
        - header
        - query
        - body
        client_id:
        - a886c2d0-88b5-4fb5-98f1-49ba367e67ea
        client_jwk: null
        client_secret:
        - b_B8Q~sPO2ZCvegDoMGR_ERYwWRI68DWKQ.redln
        consumer_by:
        - username
        - custom_id
        consumer_claim: null
        consumer_optional: false
        credential_claim:
        - sub
        disable_session: null
        discovery_headers_names: null
        discovery_headers_values: null
        display_errors: false
        domains: null
        downstream_access_token_header: null
        downstream_access_token_jwk_header: null
        downstream_headers_claims: null
        downstream_headers_names: null
        downstream_id_token_header: null
        downstream_id_token_jwk_header: null
        downstream_introspection_header: null
        downstream_introspection_jwt_header: null
        downstream_refresh_token_header: null
        downstream_session_id_header: null
        downstream_user_info_header: null
        downstream_user_info_jwt_header: null
        enable_hs_signatures: false
        end_session_endpoint: null
        extra_jwks_uris: null
        forbidden_destroy_session: true
        forbidden_error_message: Forbidden
        forbidden_redirect_uri: []
        groups_claim:
        - groups
        groups_required: null
        hide_credentials: false
        http_proxy: null
        http_proxy_authorization: null
        http_version: 1.1
        https_proxy: null
        https_proxy_authorization: null
        id_token_param_name: null
        id_token_param_type:
        - header
        - query
        - body
        ignore_signature: []
        introspect_jwt_tokens: false
        introspection_accept: application/json
        introspection_check_active: true
        introspection_endpoint: null
        introspection_endpoint_auth_method: null
        introspection_headers_client: null
        introspection_headers_names: null
        introspection_headers_values: null
        introspection_hint: access_token
        introspection_post_args_client: null
        introspection_post_args_names: null
        introspection_post_args_values: null
        issuer: https://login.microsoftonline.com/5cd3c749-e3ff-420c-a8bc-196250d99f8a/discovery/v2.0/keys
        issuers_allowed: null
        jwt_session_claim: sid
        jwt_session_cookie: null
        keepalive: true
        leeway: 0
        login_action: upstream
        login_methods:
        - authorization_code
        login_redirect_mode: fragment
        login_redirect_uri: null
        login_tokens:
        - id_token
        logout_methods:
        - POST
        - DELETE
        logout_post_arg: null
        logout_query_arg: null
        logout_redirect_uri: null
        logout_revoke: false
        logout_revoke_access_token: true
        logout_revoke_refresh_token: true
        logout_uri_suffix: null
        max_age: null
        no_proxy: null
        password_param_type:
        - header
        - query
        - body
        preserve_query_args: false
        redirect_uri:
        - https://13.212.107.110:8443/oidc
        rediscovery_lifetime: 30
        refresh_token_param_name: null
        refresh_token_param_type:
        - header
        - query
        - body
        refresh_tokens: true
        resolve_distributed_claims: false
        response_mode: query
        response_type:
        - code
        reverify: false
        revocation_endpoint: null
        revocation_endpoint_auth_method: null
        roles_claim:
        - roles
        roles_required: null
        run_on_preflight: true
        scopes:
        - openid
        scopes_claim:
        - scope
        scopes_required: null
        search_user_info: false
        session_compressor: none
        session_cookie_domain: null
        session_cookie_httponly: true
        session_cookie_idletime: null
        session_cookie_lifetime: 3600
        session_cookie_maxsize: 4000
        session_cookie_name: session
        session_cookie_path: /
        session_cookie_renew: 600
        session_cookie_samesite: Lax
        session_cookie_secure: null
        session_memcache_host: 127.0.0.1
        session_memcache_port: 11211
        session_memcache_prefix: sessions
        session_memcache_socket: null
        session_redis_cluster_maxredirections: null
        session_redis_cluster_nodes: null
        session_redis_connect_timeout: null
        session_redis_host: 127.0.0.1
        session_redis_password: null
        session_redis_port: 6379
        session_redis_prefix: sessions
        session_redis_read_timeout: null
        session_redis_send_timeout: null
        session_redis_server_name: null
        session_redis_socket: null
        session_redis_ssl: false
        session_redis_ssl_verify: false
        session_redis_username: null
        session_secret: null
        session_storage: cookie
        session_strategy: default
        ssl_verify: false
        timeout: 10000
        token_endpoint: null
        token_endpoint_auth_method: null
        token_exchange_endpoint: null
        token_headers_client: null
        token_headers_grants: null
        token_headers_names: null
        token_headers_prefix: null
        token_headers_replay: null
        token_headers_values: null
        token_post_args_client: null
        token_post_args_names: null
        token_post_args_values: null
        unauthorized_error_message: Unauthorized
        unauthorized_redirect_uri: null
        unexpected_redirect_uri: null
        upstream_access_token_header: authorization:bearer
        upstream_access_token_jwk_header: null
        upstream_headers_claims: null
        upstream_headers_names: null
        upstream_id_token_header: null
        upstream_id_token_jwk_header: null
        upstream_introspection_header: null
        upstream_introspection_jwt_header: null
        upstream_refresh_token_header: null
        upstream_session_id_header: null
        upstream_user_info_header: null
        upstream_user_info_jwt_header: null
        userinfo_accept: application/json
        userinfo_endpoint: null
        userinfo_headers_client: null
        userinfo_headers_names: null
        userinfo_headers_values: null
        userinfo_query_args_client: null
        userinfo_query_args_names: null
        userinfo_query_args_values: null
        verify_claims: true
        verify_nonce: true
        verify_parameters: false
        verify_signature: true
      enabled: true
      name: openid-connect
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  - https_redirect_status_code: 426
    name: jwt-signer
    path_handling: v0
    paths:
    - /jwt-signer
    plugins:
    - config:
        access_token_consumer_by:
        - username
        - custom_id
        access_token_consumer_claim:
        - username
        access_token_introspection_authorization: null
        access_token_introspection_body_args: null
        access_token_introspection_consumer_by:
        - username
        - custom_id
        access_token_introspection_consumer_claim: null
        access_token_introspection_endpoint: null
        access_token_introspection_hint: access_token
        access_token_introspection_jwt_claim: null
        access_token_introspection_leeway: 0
        access_token_introspection_scopes_claim:
        - scope
        access_token_introspection_scopes_required: null
        access_token_introspection_timeout: null
        access_token_issuer: kong
        access_token_jwks_uri: https://13.212.129.64:8443/auth/realms/master/protocol/openid-connect/certs
        access_token_keyset: kong
        access_token_leeway: 0
        access_token_optional: true
        access_token_request_header: Authorization
        access_token_scopes_claim:
        - scope
        access_token_scopes_required: null
        access_token_signing_algorithm: RS256
        access_token_upstream_header: Authorization:Bearer
        access_token_upstream_leeway: 0
        cache_access_token_introspection: true
        cache_channel_token_introspection: true
        channel_token_consumer_by:
        - username
        - custom_id
        channel_token_consumer_claim: null
        channel_token_introspection_authorization: null
        channel_token_introspection_body_args: null
        channel_token_introspection_consumer_by:
        - username
        - custom_id
        channel_token_introspection_consumer_claim: null
        channel_token_introspection_endpoint: null
        channel_token_introspection_hint: null
        channel_token_introspection_jwt_claim: null
        channel_token_introspection_leeway: 0
        channel_token_introspection_scopes_claim:
        - scope
        channel_token_introspection_scopes_required: null
        channel_token_introspection_timeout: null
        channel_token_issuer: kong
        channel_token_jwks_uri: null
        channel_token_keyset: kong
        channel_token_leeway: 0
        channel_token_optional: false
        channel_token_request_header: null
        channel_token_scopes_claim:
        - scope
        channel_token_scopes_required: null
        channel_token_signing_algorithm: RS256
        channel_token_upstream_header: null
        channel_token_upstream_leeway: 0
        enable_access_token_introspection: true
        enable_channel_token_introspection: true
        enable_hs_signatures: false
        enable_instrumentation: false
        realm: null
        trust_access_token_introspection: true
        trust_channel_token_introspection: true
        verify_access_token_expiry: true
        verify_access_token_introspection_expiry: true
        verify_access_token_introspection_scopes: true
        verify_access_token_scopes: true
        verify_access_token_signature: true
        verify_channel_token_expiry: true
        verify_channel_token_introspection_expiry: true
        verify_channel_token_introspection_scopes: true
        verify_channel_token_scopes: true
        verify_channel_token_signature: true
      enabled: false
      name: jwt-signer
      protocols:
      - grpc
      - grpcs
      - http
      - https
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  write_timeout: 60000
- connect_timeout: 60000
  enabled: true
  host: httpbin.org
  name: httpbin-test
  path: /anything
  port: 80
  protocol: http
  read_timeout: 60000
  retries: 5
  routes:
  - https_redirect_status_code: 426
    id: aa6106b5-cd0c-42e5-8bd1-038621ba1318
    path_handling: v0
    paths:
    - /
    preserve_host: false
    protocols:
    - http
    - https
    regex_priority: 0
    request_buffering: true
    response_buffering: true
    strip_path: true
  write_timeout: 60000
upstreams:
- algorithm: round-robin
  hash_fallback: none
  hash_on: none
  hash_on_cookie_path: /
  healthchecks:
    active:
      concurrency: 10
      healthy:
        http_statuses:
        - 200
        - 302
        interval: 0
        successes: 0
      http_path: /
      https_verify_certificate: true
      timeout: 1
      type: http
      unhealthy:
        http_failures: 0
        http_statuses:
        - 429
        - 404
        - 500
        - 501
        - 502
        - 503
        - 504
        - 505
        interval: 0
        tcp_failures: 0
        timeouts: 0
    passive:
      healthy:
        http_statuses:
        - 200
        - 201
        - 202
        - 203
        - 204
        - 205
        - 206
        - 207
        - 208
        - 226
        - 300
        - 301
        - 302
        - 303
        - 304
        - 305
        - 306
        - 307
        - 308
        successes: 0
      type: http
      unhealthy:
        http_failures: 0
        http_statuses:
        - 429
        - 500
        - 503
        tcp_failures: 0
        timeouts: 0
    threshold: 0
  name: HTTPbin
  slots: 10000
- algorithm: round-robin
  hash_fallback: none
  hash_on: none
  hash_on_cookie_path: /
  healthchecks:
    active:
      concurrency: 10
      healthy:
        http_statuses:
        - 200
        - 302
        interval: 0
        successes: 0
      http_path: /
      https_verify_certificate: true
      timeout: 1
      type: http
      unhealthy:
        http_failures: 0
        http_statuses:
        - 429
        - 404
        - 500
        - 501
        - 502
        - 503
        - 504
        - 505
        interval: 0
        tcp_failures: 0
        timeouts: 0
    passive:
      healthy:
        http_statuses:
        - 200
        - 201
        - 202
        - 203
        - 204
        - 205
        - 206
        - 207
        - 208
        - 226
        - 300
        - 301
        - 302
        - 303
        - 304
        - 305
        - 306
        - 307
        - 308
        successes: 0
      type: http
      unhealthy:
        http_failures: 0
        http_statuses:
        - 429
        - 500
        - 503
        tcp_failures: 0
        timeouts: 0
    threshold: 0
  name: test-upstream
  slots: 10000
